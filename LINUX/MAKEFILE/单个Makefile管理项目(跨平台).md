# 单个MakeFile管理项目(跨平台)

  - ***摘要**:使用一个MakeFile就可以管理整个项目,新建项目时只需要将模板Make File移动至新项目根目录即可;Windows(MinGw),Linux(GCC)系统实测可用,理论上支持makefile的所有平台皆可使用;同时配置对应变量即可实现 C / C++ 嵌入式C 的项目管理;*
    
  - ***局限**:某一种项目只能自动导入某个单一后缀的源文件(头文件没有影响);例如C++ 只能识别到`*.cpp`的文件,对于 `*.c` 类型并不能识别;*  
 
## 1. makefile的超简单入门知识  

  * 为什么要使用makefile  
    在没有图像界面的linux控制窗口中,编译代码都是使用命令行来进行编译;例如:最为简单的C语言编译
    ```bash
    gcc hello-world.c -o hello.out #编译hello-world.c文件生成可执行文件 hello.out
    ```
    对于单个文件编译可能十分简单;但是我们真正使用C/C++的使用都不会仅仅使用一个文件,通常的多个文件夹,多个文件嵌套使用.因此这里就需要使用makefile来做一个自动化编译的脚本;
    例如我们把 上述 ``` gcc hello-world.c -o hello.out ```写进一个名字为makefile的文件中,然后使用`make`指令,就可以实现与上局完全一样的功能;除此之外还增加了许多新的令人大赞的功能;

  * makefile的执行原则
    makefile的执行原则:
    ```
    <目标文件>:<源文件>
        生成目标文件的命令行方法
    ```
    - 所有的makefile中只有这一个最为重要,其他的就像函数中被main调用的函数,你只要找到它,那么你就可以慢慢的梳理整个makefile在处理些什么;  
    - makefile是一个基于文件操作的脚本,它会根据文件的最新修改日期选择性的做是否执行 `生成目标文件的命令行方法` .这一点十分有用处,例如某大型项目一共1000多个源文件,如果我们每编译一次,都需要1000多个文件同时编译链接,那么基本上我们上班->执行编译命令->执行->debug,2到3轮之后既可以下班回家了,如果是使用makefie,那么他将会只编译你改动了的文件(为理解方便),从而达到节省时间的目的;  
    - 具体规则:  
      |            目标文件状态 |          源文件状态           | 是否执行下方命令 |
      | ----------------------: | :---------------------------: | :--------------- |
      |                  不存在 |            不存在             | 不执行 && 报错   |
      |                  不存在 |             存在              | 执行             |
      | 存在 & 最新编辑时间最晚 |             存在              | 不执行           |
      |                    存在 | 存在&任意一个文件编辑时间最晚 | 执行             |

      并且主目标文件的源文件也可以是其他目标关系的目标文件,当出现需要时会进行递归调用最终生成主目标文件;第一个出现的`[公式]`就是主目标文件;
     
  * makefile的应用场景  
    - makefile大量应用在各种项目场合,开源项目几乎都是用此方式管理和编译项目.但是超大型项目一般都是使用多个makefile穿插在各个文件夹中,这样可以很方便的管理各个模块的开关和复用.  
    - 但是对于处于学习阶段的同学来说,他可能会频繁的新建项目验证各类问题,但是说大不大,说小不小,如果使用多个makefile有点大材小用,用单个makefile是最好的选择;  
    - 但是单个makefile现在网络上大多数都是需要你自己手动加入文件路径的makefile,作为懒人的我,肯定不想这样啦,于是,就有了这边文章;
   
## 2. 单个makefile管理项目思维拓展  
    
## 3. makefile源码分析  